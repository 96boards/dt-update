/dts-v1/;
/plugin/;

#include <dt-bindings/clock/qcom,mmcc-msm8996.h>
#include <dt-bindings/gpio/gpio.h>

/ {
	fragment@0 {
		target-path = "/soc";
		__overlay__ {
			camera_board_vdddo: fixedregulator_camera_board@0 {
				compatible = "regulator-fixed";
				regulator-name = "camera_board_vdddo";
				regulator-min-microvolt = <1800000>;
				regulator-max-microvolt = <1800000>;
				regulator-always-on;
			};

			camera_board_vdda: fixedregulator_camera_board@1 {
				compatible = "regulator-fixed";
				regulator-name = "camera_board_vdda";
				regulator-min-microvolt = <2800000>;
				regulator-max-microvolt = <2800000>;
				regulator-always-on;
			};

			camera_board_vddd: fixedregulator_camera_board@2 {
				compatible = "regulator-fixed";
				regulator-name = "camera_board_vddd";
				regulator-min-microvolt = <1500000>;
				regulator-max-microvolt = <1500000>;
				regulator-always-on;
			};
		};
	};

	fragment@1 {
		target-path = "/soc/cci@a0c000";
		__overlay__ {
			status = "ok";

			camera_board@39 {
				compatible = "ovti,ov5645";
				reg = <0x39>;

				enable-gpios = <&msmgpio 98 GPIO_ACTIVE_HIGH>;
				reset-gpios = <&msmgpio 104 GPIO_ACTIVE_LOW>;
				pinctrl-names = "default";
				pinctrl-0 = <&camera_board_default>;

				clocks = <&mmcc CAMSS_MCLK1_CLK>;
				clock-names = "xclk";
				clock-frequency = <24000000>;

				vdddo-supply = <&camera_board_vdddo>;
				vdda-supply = <&camera_board_vdda>;
				vddd-supply = <&camera_board_vddd>;

				status = "ok";

				port {
					camera_board_ep: endpoint {
						clock-lanes = <1>;
						data-lanes = <0 2>;
						remote-endpoint = <&csiphy1_ep>;
					};
				};
			};
		};
	};

	fragment@2 {
		target-path = "/soc/camss@a00000";
		__overlay__ {
			status = "ok";

			ports {
				#address-cells = <1>;
				#size-cells = <0>;
				port@1 {
					reg = <1>;
					csiphy1_ep: endpoint {
						clock-lanes = <7>;
						data-lanes = <0 1>;
						remote-endpoint = <&camera_board_ep>;
						status = "ok";
					};
				};
			};
		};
	};
};
